<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Lib_VTK_IO: Parallel Frameworks Benchmarks</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Lib_VTK_IO
   </div>
   <div id="projectbrief">a library of functions for Input and Output pure Fortran data in VTK format</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>README</span></a></li>
      <li><a href="../../modules.html"><span>API</span></a></li>
      <li><a href="../../files.html"><span>Source&#160;Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('db/d68/SpeedUP.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Parallel Frameworks Benchmarks </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Parallel"></a>
Parallel Frameworks Benchmarks</h1>
<p>Lib_VTK_IO can handle multiple concurrent files and it is <b>thread/processor-safe</b> (meaning that can be safely used into parallel frameworks as OpenMP or MPI). In order to assess its scalability two procedures have implemented into Test_Driver program, 1) <a class="el" href="../../dc/de6/group__Lib__TestersLibrary.html#ac80c63cdbbeb9dbe8d50de9f06b780ac">test_mpi</a> and <a class="el" href="../../d3/dc8/group__Lib__TestersPublicProcedure.html#ga742784f3342edfa9820ff9cdcc93a895">test_openmp</a> for testing MPI and OpenMP parallel frameworks, respectively.</p>
<h2><a class="anchor" id="MPI"></a>
MPI Framework Benchmark</h2>
<p>The Test_Driver program contains a procedure, <a class="el" href="../../dc/de6/group__Lib__TestersLibrary.html#ac80c63cdbbeb9dbe8d50de9f06b780ac">test_mpi</a>, for assessing the scalability of Lib_VTK_IO into MPI parallel framework. The bash script mpi_benchmark.sh can be used to repeat the benchmark many times with varying number of MPI processes in order to asses the speedup of the library (the Test_Driver program must be compiled with MPI=yes option): </p>
<div class="fragment"><div class="line">./mpi_benchmark.sh -ni 10 -nf 32 -np 32</div>
</div><!-- fragment --><p> This will test the saving of a PStructuredGrid file partitioned into (-nf) 32 blocks/files, varying the number of MPI processes from 1 to 32 with a step of 2 and each benchmark is repeated 10 times and the averaged results are saved. The results are echoed to stdout and also into mpi_speedup.dat file, where also the normalized (with respect the serial performance) results are saved. Figure <a class="el" href="../../db/d68/SpeedUP.html#mpi-speedup">mpi-speedup</a> reports the normalized elapsed time as the number of MPI processes varies. Both x and y are log scaled in order to emphasizes the linearity of the speedup up to 12 MPI processes.</p>
<p><a class="anchor" id="mpi-speedup"></a></p>
<div class="image">
<img src="../../mpi_speedup.png" alt="mpi_speedup.png"/>
<div class="caption">
Figure 1: MPI parallel framework, Speedup (normalized) on 12 Cores Intel(R) Xeon(R) CPU X5650 @ 2.67GHz, 32 concurrent VTS files</div></div>
<p> The library scales linearly as expected. As a matter of facts, each MPI process saves its own file(s) thus the speedup is maximum. The linearity is lost when then number of MPI processes becomes higher than 12 being the number of cores available for this benchmark (12 Cores Intel(R) Xeon(R) CPU X5650 @ 2.67GHz). The compiling options are not relevant, these results have been obtained in DEBUG mode with OpenMPI 1.6 + Intel Fortran 13.0.0.</p>
<p>This result is interesting for all the applications where "1 file for 1 MPI process" is reasonable because it optimizes the IO performance. Obviously, for high number of MPI processes (order of thousands) this is not a good strategy (it produces thousands of files) whereas a MPI2 IO strategy should be preferable.</p>
<h2><a class="anchor" id="OpenMP"></a>
OpenMP Framework Benchmark</h2>
<p>The Test_Driver program contains a procedure, <a class="el" href="../../d3/dc8/group__Lib__TestersPublicProcedure.html#ga742784f3342edfa9820ff9cdcc93a895">test_openmp</a>, for assessing the scalability of Lib_VTK_IO into OpenMP parallel framework. The bash script openmp_benchmark.sh can be used to repeat the benchmark many times with varying number of OpenMP threads in order to asses the speedup of the library (the Test_Driver program must be compiled with OPENMP=yes option): </p>
<div class="fragment"><div class="line">./mpi_benchmark.sh -ni 10 -nf 32 -nt 32</div>
</div><!-- fragment --><p> This will test the saving of a PStructuredGrid file partitioned into (-nf) 32 blocks/files, varying the number of OpenMP threads from 1 to 32 with a step of 2 and each benchmark is repeated 10 times and the averaged results are saved. The results are echoed to stdout and also into openmp_speedup.dat file, where also the normalized (with respect the serial performance) results are saved. Figure <a class="el" href="../../db/d68/SpeedUP.html#openmp-speedup">openmp-speedup</a> reports the normalized elapsed time as the number of OpenMP threads varies. Both x and y are log scaled in order to emphasizes the linearity of the speedup up to 12 OpenMP threads.</p>
<p><a class="anchor" id="openmp-speedup"></a></p>
<div class="image">
<img src="../../openmp_speedup.png" alt="openmp_speedup.png"/>
<div class="caption">
Figure 2: OpenMP parallel framework, Speedup (normalized) on 12 Cores Intel(R) Xeon(R) CPU X5650 @ 2.67GHz, 32 concurrent VTS files</div></div>
<p> The library scales linearly as expected. As a matter of facts, each OpenMP threads saves its own file(s) thus the speedup is maximum. The linearity is lost when then number of OpenMP threads becomes higher than 12 being the number of cores available for this benchmark (12 Cores Intel(R) Xeon(R) CPU X5650 @ 2.67GHz). The compiling options are not relevant, these results have been obtained in DEBUG mode with Intel Fortran 13.0.0. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon May 27 2013 12:27:50 for Lib_VTK_IO by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
